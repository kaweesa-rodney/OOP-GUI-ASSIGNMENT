{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A real-time chat application">
  <meta name="theme-color" content="#6366f1">
  <title>{% block title %}Chat App{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="{% static 'css/styles.css' %}" rel="stylesheet">

  <!--JQUERY-->
  <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
  <script src="{% static 'js/jquery.js' %}"></script>
  <script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
  <script src="{% static 'js/jquery.slimscroll.js' %}"></script>

  <link rel="stylesheet" href="{% static 'css/dataTables.bootstrap4.min.css' %}">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    function startTime() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        m = checkTime(m);
        s = checkTime(s);
        document.getElementById('txt').innerHTML =
        h + ":" + m + ":" + s;
        var t = setTimeout(startTime, 500);
    }

    function checkTime(i) {
            if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
            return i;
    }

    </script>
</head>

<body>


  {% block body %}
  <div class="container mt-4">
    {% block content %}
    {% endblock %}
  </div>
  {% endblock %}
  
  {% block include_js %}
  {% endblock %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript">
      
      $(document).bind('keydown', function(e) {
          if(e.ctrlKey && (e.which == 83)) {
              e.preventDefault();
              //alert('Ctrl+S');
              return false;
          }
      });

      /*window.onbeforeunload = function(){
          return "";
      }*/

      //monitor user activity and logout due to inactivity
      var timeoutID;
      function setup(){
          this.addEventListener("mousemove", resetTimer, false);
          this.addEventListener("mousedown", resetTimer, false);
          this.addEventListener("keypress", resetTimer, false);
          this.addEventListener("DOMMouseScroll", resetTimer, false);
          this.addEventListener("touchmove", resetTimer, false);
          this.addEventListener("MSPointerMove", resetTimer, false);

          startTimer();
      }

      setup();

      function startTimer(){
          //wait 1 minute before calling goInactive
          timeoutID = window.setTimeout(goInactive, 500000);
      }

      function resetTimer(e){
          window.clearTimeout(timeoutID);

          goActive();
      }

      function goInactive(evt){
          
          window.location.href="{% url 'users:logout_view' %}";
      }

      function goActive(){
          //do nothing/something

          startTimer();
      }
  </script>
  {% block domready %}
  {% endblock %}

</body>
</html>